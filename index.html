<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FantaBey</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="site-header">
    <div class="brand">
      <div class="logo">FB</div>
      <div>
        <h1>FantaBey</h1>
        <p class="subtitle">FantaBeyblade per i nostri tornei local</p>
      </div>
    </div>
    <div class="header-user" id="header-user"></div>
    <nav class="tabs" aria-label="Sezioni">
      <button class="tab" data-view="regole">Regolamento</button>
      <button class="tab" data-view="account">Account</button>
      <button class="tab" data-view="lega">Torneo</button>
      <button class="tab" data-view="iscrizione">Iscrizione</button>
      <button class="tab" data-view="giocatori">Giocatori</button>
      <button class="tab" data-view="squadre">Squadre</button>
      <button class="tab" data-view="admin">Admin</button>
    </nav>
  </header>

  <main class="container">
    <section class="view" id="view-regole">
      <h2>Regolamento</h2>
      <p class="muted">Regole serie e stupidissime. I punteggi si sommano per ogni giocatore reale e vanno a comporre il punteggio della squadra.</p>
      <div class="rules-block">
        <h3>Bonus</h3>
        <p class="muted">I bonus aggiungono punti al punteggio del giocatore.</p>
        <div class="rules-grid" id="bonus-list"></div>
      </div>
      <div class="rules-block">
        <h3>Malus</h3>
        <p class="muted">I malus sottraggono punti al punteggio del giocatore.</p>
        <div class="rules-grid" id="malus-list"></div>
      </div>
    </section>

    <section class="view" id="view-account" hidden>
      <h2>Account</h2>
      <div class="grid-2">
        <div class="card">
          <h3>Registrati</h3>
          <form id="register-form">
            <label>
              Nome visualizzato
              <input type="text" name="displayName" required placeholder="Es. Marco" />
            </label>
            <label>
              Email
              <input type="email" name="email" required placeholder="nome@email.com" />
            </label>
            <label>
              Password
              <input type="password" name="password" required />
            </label>
            <button type="submit" class="btn">Crea account</button>
            <p class="form-note" id="register-note"></p>
          </form>
        </div>
        <div class="card">
          <h3>Accedi</h3>
          <form id="login-form">
            <label>
              Email
              <input type="email" name="email" required />
            </label>
            <label>
              Password
              <input type="password" name="password" required />
            </label>
            <button type="submit" class="btn">Accedi</button>
            <p class="form-note" id="login-note"></p>
          </form>
        </div>
      </div>
      <div class="card" id="account-status"></div>
    </section>

    <section class="view" id="view-lega" hidden>
      <h2>Torneo</h2>
      <div class="grid-2">
        <div class="card">
          <h3>Seleziona torneo</h3>
          <label>
            Torneo attivo
            <select id="league-select"></select>
          </label>
          <button id="league-set" class="btn">Usa questo torneo</button>
          <p class="form-note" id="league-note"></p>
        </div>
        <div class="card">
          <h3>Crea la tua squadra</h3>
          <form id="team-form">
            <label>
              Nome squadra
              <input type="text" name="teamName" required placeholder="Es. Cobra Gold" />
            </label>
            <label>
              Scegli 3 giocatori
              <div class="pick-list" id="team-picker"></div>
            </label>
            <button type="submit" class="btn">Registra squadra</button>
            <p class="form-note" id="team-picker-note"></p>
          </form>
        </div>
      </div>
    </section>

    <section class="view" id="view-iscrizione" hidden>
      <h2>Iscrizione</h2>
      <div class="card">
        <h3>Registrati come giocatore giocante </h3>
        <form id="competitor-form">
          <label>
            Seleziona torneo
            <select id="competitor-league-select" name="tournamentId"></select>
          </label>
          <label>
            Nickname (opzionale)
            <input type="text" name="playerNick" placeholder="Es. Dragoon" />
          </label>
          <button type="submit" class="btn">Candidati nel torneo</button>
          <p class="form-note" id="competitor-note"></p>
        </form>
      </div>
    </section>

    <section class="view" id="view-giocatori" hidden>
      <h2>Giocatori in Gara</h2>
      <div class="card">
        <div id="players-list" class="list"></div>
      </div>
    </section>

    <section class="view" id="view-squadre" hidden>
      <h2>Squadre</h2>
      <div class="card">
        <div id="teams-list" class="list"></div>
      </div>
    </section>

    <section class="view" id="view-admin" hidden>
      <h2>Admin</h2>
      <div class="card">
        <div class="admin-head">
          <div>
            <p class="muted">Inserisci la password admin per gestire leghe e punteggi.</p>
          </div>
          <div class="admin-toggle">
            <input type="password" id="admin-code" placeholder="Password admin" />
            <button id="admin-unlock" class="btn btn-ghost">Sblocca</button>
          </div>
        </div>
        <p class="form-note" id="admin-lock-note">Admin bloccato.</p>
      </div>
      <div class="card">
        <h3>Crea torneo</h3>
        <form id="league-form">
          <label>
            Nome torneo
            <input type="text" name="leagueName" required placeholder="Es. Entropy Cup" />
          </label>
          <button type="submit" class="btn">Crea torneo</button>
          <p class="form-note" id="league-create-note"></p>
        </form>
        <div class="card" style="margin-top: 12px;">
          <h4>Gestisci tornei</h4>
          <div id="tournaments-list" class="list"></div>
          <p class="form-note">Quando un torneo è iniziato non si possono più creare squadre.</p>
          <p class="form-note" id="league-delete-note"></p>
        </div>
      </div>
      <div class="card">
        <div class="admin-head">
          <div>
            <p class="muted">Seleziona un giocatore e aggiungi punti con le regole.</p>
          </div>
        </div>
        <div id="admin-area" class="admin-area" aria-hidden="true">
          <form id="score-form">
            <label>
              Giocatore
              <select name="playerId" id="admin-player-select" required></select>
            </label>
            <label>
              Esito round
              <select name="outcome" required>
                <option value="win">Vinto</option>
                <option value="loss">Perso</option>
              </select>
            </label>
            <label>
              Round
              <select name="round" required>
                <option value="1">Round 1</option>
                <option value="2">Round 2</option>
                <option value="3">Round 3</option>
                <option value="4">Round 4</option>
                <option value="5">Round 5</option>
              </select>
            </label>
            <div class="rules-grid" id="admin-rules"></div>
            <div class="meta-section">
              <h4>Malus Bey Meta</h4>
              <div class="meta-list" id="meta-list"></div>
              <p class="meta-note">Se ne usi 2 nello stesso deck → -5. Se ne usi 3 nello stesso deck → -8. Se vinci con full meta → -3 bonus.</p>
              <label class="checkbox">
                <input type="checkbox" name="fullMetaWin" />
                <span>Vinci con full meta (-3)</span>
              </label>
            </div>
            <label>
              Note (opzionale)
              <input type="text" name="note" placeholder="Es. finale torneo" />
            </label>
            <div class="admin-actions">
              <button type="submit" class="btn">Aggiungi punteggio</button>
              <button type="button" id="reset-scores" class="btn btn-ghost">Reset punteggi</button>
            </div>
          </form>
        </div>
        <p class="form-note" id="admin-score-note">Seleziona un torneo e sblocca admin.</p>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <p>FantaBey — punti aggiornati in 24h.</p>
  </footer>

  <script type="module" src="app.js"></script>
</body>
</html>
